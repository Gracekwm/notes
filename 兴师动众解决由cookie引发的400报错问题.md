# 兴师动众解决由cookie引发的400报错问题

背景是这样的，做的是一个机票的购票业务，包括了购票（单程购票和往返购票）等功能。购票的航班信息需要从航班搜索页带到下单页，所以在跳转至下单页前将航班信息存在了cookie。遇到的问题是购买单程机票的时候，一切流程正常（从航班查询页，选择需要的购买的航班，进入到下单页，进行下单操作）；但是购买往返机票的时候，进入到下单页时，发现下单页所有接口都报了400的错误，继而再访问该网站的其他页面也都报了400的错误。

一般来说400报错是因为参数错误



其实这是因为web服务器对请求头长度做了限制，避免畸形封装包消耗服务器的资源。

众所周知，cookie是塞在请求头里面的，拿php语言来说，当请求一个页面的时候，cookie会通过http协议传到服务端，这也是通过$_COOKIE就能获取到远程客户端中的cookie的原理。所以Cookie太大后，整个HTTP头也会被撑大



其实不止页面会在请求头（Request Headers）传递cookie，连css、图片这些静态资源也会传递。可想而知，cookie过大也是非常浪费性能的，也会浪费我们的网站大量的流量。所以作为一个开发者，我们要慎用cookie，不能因为cookie是存在客户端这种片面的思想就乱用了。用一个东西之前要非常清楚它的原理，这样才能学好编程。